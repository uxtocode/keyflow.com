<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeyFlow - speedup your typing</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="icon" href="assets/images/keyflow-logo.ico" type="image/x-icon">
</head>

<body>
    <div class="message">
        <div class="flex4">
            <img src="assets/images/keyflow-logo.png" height="45px">
            <p class="logo-mobile">KEYFLOW</p>
        </div>

        <h1>Desktop Only</h1>
        <p>This website is designed for desktop use only. Please visit the site on a desktop computer.</p><br>
        <button class="button random-btn" onclick="window.location.href='index.html';">Reload</button>
    </div>

    <div class="page">
        <!-- navbar -->
        <header>
            <div class="container">
                <div class="flex">
                    <img src="assets/images/keyflow-logo.png" height="40px">
                    <p class="logo">KEYFLOW</p>
                </div>
                <nav>
                    <ul>
                        <li><a href="index.html">Text Practice</a></li>
                        <li><a href="common-words.html">Common Words</a></li>
                        <li><a href="about.html">About Us</a></li>
                    </ul>
                </nav>
                <div class="menu-toggle">
                    <span class="menu-icon">☰</span>
                    <span class="close-icon">✖</span>
                </div>
            </div>
        </header>

        <div class="top-padding"></div>

        <div class="heading">
            <h2>Practice Common Words</h2>
            <p class="light-text">"Practice commonly used words and improve your skills."
            </p>
        </div>

        <div class="top-padding"></div>

        <div class="container2">
            <!-- <div class="ads1">

        </div> -->
            <div class="main">
                <div class="justify-space-between">
                    <div class="timer" id="timer">0 Seconds</div>
                    <div class="timer" id="mistakes">0 Mistake</div>
                    <div class="button-container">
                        <button class="button random-btn" id="randomBtn">Randomize text</button>
                        <button class="button show-results-btn" id="calculateResultBtn">Show Results</button>
                    </div>
                </div>
                <div class="text-to-type" id="textToType">
                    <!-- Random paragraph will be set by script -->
                </div>
                <textarea class="input-area" id="inputArea" placeholder="Start typing here..." autofocus></textarea>
            </div>
            <!-- <div class="ads1">
            
        </div> -->
        </div>

        <div class="top-padding"></div>


        <div class="heading">
            <p class="light-text">Thanks For Vising Our Website.</p>
        </div>


        <!-- Modal Structure -->
        <div id="resultsModal" class="modal">
            <div class="modal-content">
                <h2>Typing Test Results</h2>
                <table class="result-table">
                    <tr>
                        <th>Time Taken</th>
                        <td id="elapsedTime"></td>
                    </tr>
                    <tr>
                        <th>Mistakes</th>
                        <td id="modalMistakes"></td>
                    </tr>
                    <tr>
                        <th>Speed</th>
                        <td id="Speed"></td>
                    </tr>
                    <tr>
                        <th>Accuracy</th>
                        <td id="accuracy"></td>
                    </tr>
                </table>
                <div class="CloseButton">
                    <button id="closeModalBtn">Close</button>
                </div>
            </div>
        </div>

        <div class="top-padding"></div>

        <!-- footer -->
        <footer>
            <p> All rights reserved. <br>&copy; 2025 KeyFlow.</p>
            <!-- <a href="terms.html">Terms & Conditions.</a> -->
        </footer>

        <script>
            // Random quotes

            const paragraphs = [
                "make like well come find many those because through where still own year never three back work such day another",
                "something over again know right good see find home place few each long need think like another through here",
                "under many since take our both each found last part next right small young always better great big those",
                "during between must something both around go show last before different three small own call move problem same",
                "long place week thing place last never week right again different come look own know mean call good bring",
                "show never find go will keep never much under look have long different still around find next own show",
                "much go mean year same yet long while need different keep each see week still around work right day",
                "know since during go another move many big own find will make much back same right move many call",
                "never work go under problem never place show find better something under good long much right go each problem",
                "back keep find go move make another long think last call day place show call look never week come",
                "right back move much still year own better yet make like well come find many those because through where",
                "still own year never three back work such day another something over again know right good see find home",
                "place few each long need think like another through here under many since take our both each found",
                "last part next right small young always better great big those during between must something both around go",
                "show last before different three small own call move problem same long place week thing place last never",
                "week right again different come look own know mean call good bring show never find go will keep",
                "never much under look have long different still around find next own show much go mean year same",
                "yet long while need different keep each see week still around work right day know since during go",
                "another move many big own find will make much back same right move many call never work go",
                "under problem never place show find better something under good long much right go each problem back keep",
                "the to a and in have I on with it be of that for do",
                "you at this is or an my as have he which by we from",
                "there been will about some can up than more no only new its",
                "over such like other her she how also now just should our down",
                "must way well back only such into where most after may before",
                "through same know place state work life always never during between under",
                "among every few own take see being come need around through might",
                "long even last again great own start away day part want while call",
                "three next big show right small think place day need four best",
                "very mean name keep man woman find try every only come start",
                "last small large use many should work never most away nothing home",
                "group among always think young under four bring another read find help",
                "keep best know need first come give great high open meet call",
                "place start next hand every the do and of in it be with",
                "that have for on this or as I you at by we from",
                "he which by we there been will about some can up than",
                "more no only new its over such like other her she how",
                "also now just should our down must way well back only such",
                "into where most after may before through same know place state work",
                "life always never during between under among every few own take see",
                "being come need around through might long even last again great own",
                "start away day part want while call three next big show right",
                "small think place day need four best very mean name keep man",
                "woman find try every only come start last small large use many",
                "should work never most away nothing home group among always think young",
                "under four bring another read find help keep best know need first",
                "come give great high open meet call place start next hand every",
                "the do and of in it be with that have for on this",
                "or as I you at by we from he which by we there",
                "been will about some can up than more no only new its over",
                "such like other her she how also now just should our down must",
                "way well back only such into where most after may before through",
                "same know place state work life always never during between under among",
                "every few own take see being come need around through might long",
                "even last again great own start away day part want while call",
                "three next big show right small think place day need four best",
                "very mean name keep man woman find try every only come start",
                "last small large use many should work never most away nothing home",
                "group among always think young under four bring another read find help",
                "keep best know need first come give great high open meet call",
                "place start next hand every the do and of in it be with",
                "that have for on this or as I you at by we from",
                "he which by we there been will about some can up than more",
                "no only new its over such like other her she how also now",
                "just should our down must way well back only such into where",
                "most after may before through same know place state work life always",
                "never during between under among every few own take see being come",
                "need around through might long even last again great own start away",
                "day part want while call three next big show right small think",
                "place day need four best very mean name keep man woman find",
                "try every only come start last small large use many should work",
                "never most away nothing home group among always think young under four",
                "bring another read find help keep best know need first come give",
                "great high open meet call place start next hand every the do",
                "and of in it be with that have for on this or as I",
                "you at by we from he which by we there been will about",
                "some can up than more no only new its over such like other",
                "her she how also now just should our down must way well back",
                "only such into where most after may before through same know place",
                "state work life always never during between under among every few own",
                "take see being come need around through might long even last again",
                "great own start away day part want while call three next big",
                "show right small think place day need four best very mean name",
                "keep man woman find try every only come start last small large",
                "use many should work never most away nothing home group among always",
                "think young under four bring another read find help keep best know",
                "need first come give great high open meet call place start next",
                "hand every the do and of in it be with that have for",
                "on this or as I you at by we from he which by we",
                "there been will about some can up than more no only new its",
                "over such like other her she how also now just should our down",
                "must way well back only such into where most after may before",
                "through same know place state work life always never during between under",
                "among every few own take see being come need around through might",
                "long even last again great own start away day part want while",
                "call three next big show right small think place day need four",
                "best very mean name keep man woman find try every only come",
                "start last small large use many should work never most away nothing",
                "home group among always think young under four bring another read find",
                "help keep best know need first come give great high open meet",
                "call place start next hand every the do and of in it"
            ];

            const textToTypeElement = document.getElementById('textToType');
            const inputArea = document.getElementById('inputArea');
            const randomBtn = document.getElementById('randomBtn');
            const timerElement = document.getElementById('timer');
            const mistakesElement = document.getElementById('mistakes');
            const resultsElement = document.getElementById('results');

            let timer; // Variable to store the timer
            let timeElapsed = 0; // Variable to track time elapsed
            let timerStarted = false; // Flag to check if timer has started
            let mistakes = 0; // Variable to track number of mistakes
            let currentParagraph = ''; // Store the current paragraph

            function setRandomParagraph() {
                const randomIndex = Math.floor(Math.random() * paragraphs.length);
                currentParagraph = paragraphs[randomIndex];
                textToTypeElement.innerText = currentParagraph;
                resetTimer(); // Reset the timer whenever a new paragraph is loaded
                resetMistakes(); // Reset mistakes when a new paragraph is loaded
            }

            // Variables to track the number of characters typed
            let totalTypedChars = 0;
            let totalCorrectChars = 0;

            function startTimer() {
                if (!timerStarted) { // Check if the timer has already started
                    timerStarted = true;
                    timer = setInterval(() => {
                        timeElapsed++;
                        timerElement.innerText = `Timer: ${timeElapsed} seconds`;
                    }, 1000);
                }
            }

            function resetTimer() {
                clearInterval(timer); // Stop the current timer
                timeElapsed = 0; // Reset time elapsed
                timerElement.innerText = `Timer: 0 seconds`; // Update timer display
                timerStarted = false; // Reset the timer started flag
                inputArea.value = ""; // Clear the input area
                totalTypedChars = 0; // Reset total typed characters
                totalCorrectChars = 0; // Reset total correct characters
            }

            function resetMistakes() {
                mistakes = 0; // Reset the mistakes counter
                mistakesElement.innerText = `Mistakes: ${mistakes}`; // Update mistakes display
            }

            function checkInput() {
                const targetText = currentParagraph;
                const userInput = inputArea.value;
                totalTypedChars = userInput.length; // Update total typed characters

                // Reset the formatted text
                let formattedText = '';
                totalCorrectChars = 0; // Reset correct characters counter

                for (let i = 0; i < targetText.length; i++) {
                    if (i < userInput.length) {
                        if (userInput[i] === targetText[i]) {
                            formattedText += `<span class="correct">${targetText[i]}</span>`;
                            totalCorrectChars++; // Count correct characters
                        } else {
                            formattedText += `<span class="incorrect">${targetText[i]}</span>`;
                            if (i === userInput.length - 1) {
                                mistakes++; // Only count mistakes once
                            }
                        }
                    } else {
                        formattedText += targetText[i];
                    }
                }

                // Update the displayed text with highlighted characters
                textToTypeElement.innerHTML = formattedText;

                // Update mistakes display
                mistakesElement.innerText = `Mistakes: ${mistakes}`;
            }

            function calculateResults() {
                if (totalTypedChars === 0) {
                    return; // Avoid division by zero
                }

                clearInterval(timer);

                const accuracy = Math.round((totalCorrectChars / (totalTypedChars + mistakes)) * 100);

                // Calculate Words Per Minute (WPM)
                const wpm = Math.round((totalTypedChars / 5) / (timeElapsed / 60));

                console.log(`Accuracy: ${accuracy}%`);
                console.log(`WPM: ${wpm}`);

                // Update the modal with results
                document.getElementById('elapsedTime').innerText = `${timeElapsed} seconds`;
                document.getElementById('modalMistakes').innerText = `${mistakes}`;  // Updated to use modalMistakes id
                document.getElementById('Speed').innerText = `${wpm} WPM`;
                document.getElementById('accuracy').innerText = `${accuracy}%`;

                // Display the modal
                openModal();
            }

            // Function to open the modal
            function openModal() {
                document.getElementById('resultsModal').style.display = 'block';
            }

            // Function to reset the typing test
            function resetTypingTest() {
                resetTimer(); // Reset the timer
                resetMistakes(); // Reset the mistakes
                setRandomParagraph(); // Load a new random paragraph
                inputArea.value = ''; // Clear the input area
                totalTypedChars = 0; // Reset total typed characters
                totalCorrectChars = 0; // Reset total correct characters
            }

            // Close button functionality
            closeModalBtn.addEventListener('click', () => {
                document.getElementById('resultsModal').style.display = 'none'; // Hide the modal
                location.reload(); // Reload the page
            });

            // Add an event listener to the input area to start the timer on the first input
            inputArea.addEventListener('input', () => {
                startTimer();
                checkInput(); // Check input for correctness on each keystroke
                checkCompletion();
            });

            // Call setRandomParagraph() when the page loads
            document.addEventListener('DOMContentLoaded', setRandomParagraph);

            // Reset and calculate results when the user finishes typing or presses a key to end the test
            inputArea.addEventListener('blur', calculateResults); // Example event; adjust as needed

            randomBtn.addEventListener('click', () => {
                setRandomParagraph();
                resetTimer(); // Reset the timer whenever a new paragraph is loaded
                resetMistakes(); // Reset mistakes when a new paragraph is loaded
            });

            // Automatically show results when the user finishes typing the entire paragraph
            function checkCompletion() {
                const targetText = currentParagraph;
                const userInput = inputArea.value;

                if (userInput === targetText) {
                    calculateResults(); // Show results immediately after finishing typing
                }
            }

            // Add an event listener to calculate results when the user finishes typing
            inputArea.addEventListener('blur', calculateResults);

            // Call setRandomParagraph() when the page loads
            document.addEventListener('DOMContentLoaded', setRandomParagraph);

            randomBtn.addEventListener('click', setRandomParagraph);
            randomBtn.addEventListener('click', setRandomParagraph);
        </script>
    </div>
</body>

</html>